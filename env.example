# File Conversion Utility - Environment Configuration
# Copy this file to .env and configure for your deployment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port
PORT=3000

# Server host binding
# - 'localhost' for development/testing
# - '0.0.0.0' for production/intranet deployment
HOST=localhost

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Accept self-signed certificates?
# Set to 'true' for internal servers with self-signed certs
# Set to 'false' for CA-signed certificates
ACCEPT_SELF_SIGNED_CERTS=true

# =============================================================================
# BUILD CONFIGURATION (Set Once During Initial Setup)
# =============================================================================

# LibreOffice installation path (leave blank for auto-detection)
# Auto-detection checks:
#   - Bundled: lib/libreoffice/program/soffice.exe
#   - System: C:\Program Files\LibreOffice\program\soffice.exe
#   - System: C:\Program Files (x86)\LibreOffice\program\soffice.exe
# Only set this if LibreOffice is in a non-standard location
LIBREOFFICE_PATH=

# Microsoft Edge executable path (leave blank for auto-detection)
# Auto-detection checks:
#   - C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe
#   - C:\Program Files\Microsoft\Edge\Application\msedge.exe
# Only set this if Edge is in a non-standard location
EDGE_PATH=

# =============================================================================
# DEPLOYMENT CONFIGURATION (Configure After Deployment)
# =============================================================================

# Enable HTTPS server? (requires SSL certificates)
# Generate certificates: node scripts/generate-ssl-cert.js
SSL_ENABLED=false

# IP Whitelist (comma-separated IPs or CIDR ranges)
# Leave blank to allow all IPs
# Example: 192.168.1.0/24,10.0.0.1,172.16.0.0/16
IP_WHITELIST=

# =============================================================================
# CONVERSION QUALITY SETTINGS
# =============================================================================

# Enable DOCX pre-processing to improve conversion fidelity (default: true)
# Pre-processing normalizes fonts, colors, and styles for better LibreOffice compatibility
ENABLE_PREPROCESSING=true

# CloudConvert API key for high-fidelity cloud conversions (optional)
# Get API key from: https://cloudconvert.com/
# Free tier: 25 conversions/day, Paid: ~$0.01-0.02 per conversion
# Leave blank to disable cloud conversion
CLOUDCONVERT_API_KEY=

# Prefer cloud conversion over LibreOffice (default: false)
# Set to true to use cloud API as primary method (costs money but 99% fidelity)
# Falls back to LibreOffice if cloud conversion fails
PREFER_CLOUD_CONVERSION=false

# =============================================================================
# ADVANCED SETTINGS (Defaults Work For Most Cases)
# =============================================================================

# Environment mode
# - 'development' for local testing
# - 'production' for server deployment
NODE_ENV=development

# Maximum file upload size (bytes)
# Default: 52428800 (50MB)
MAX_FILE_SIZE=52428800

# Rate limit (requests per minute per IP)
# Default: 30
RATE_LIMIT_MAX=30

# Temporary file directory
# - './temp' for development
# - 'C:\temp' for Windows production
# - '/tmp' for Linux production
TEMP_DIR=./temp

# Logging level
# Options: error, info, debug
LOG_LEVEL=info

# Concurrency control
MAX_CONCURRENCY=2
MAX_QUEUE=10

# =============================================================================
# QUICK START GUIDE
# =============================================================================

# For average developers, you only need to:
#
# 1. Set ACCEPT_SELF_SIGNED_CERTS to true or false
#
# 2. Leave LIBREOFFICE_PATH blank (auto-detects installed LibreOffice)
#
# 3. Leave EDGE_PATH blank (auto-detects Microsoft Edge)
#
# 4. After deployment, optionally configure:
#    - SSL_ENABLED (if you need HTTPS)
#    - IP_WHITELIST (if you need access restriction)
#
# That's it! The service will auto-detect paths and use sensible defaults.

# =============================================================================
# TESTING SETUP
# =============================================================================

# For initial testing on Windows 11 with LibreOffice installed:
#
# PORT=3000
# HOST=localhost
# ACCEPT_SELF_SIGNED_CERTS=true
# LIBREOFFICE_PATH=
# EDGE_PATH=
# SSL_ENABLED=false
# IP_WHITELIST=
#
# Then run:
#   npm install
#   node scripts/bundle-libreoffice.js
#   node scripts/verify-system.js
#   npm start

# =============================================================================
# PRODUCTION SETUP
# =============================================================================

# For production deployment on Windows Server:
#
# PORT=3000
# HOST=0.0.0.0
# ACCEPT_SELF_SIGNED_CERTS=true
# LIBREOFFICE_PATH=
# EDGE_PATH=
# SSL_ENABLED=true
# IP_WHITELIST=192.168.1.0/24
# NODE_ENV=production
# TEMP_DIR=C:\temp
# LOG_LEVEL=info
#
# Then run:
#   node scripts/generate-ssl-cert.js
#   npm start
