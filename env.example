# File Conversion API - Configuration Template
# Windows Server / Windows 11 Deployment

# This file documents environment variable configuration options.
# The application uses appsettings.json as the primary configuration source.
# Environment variables override appsettings.json values.

# =============================================================================
# DEPLOYMENT TARGET
# =============================================================================
# Platform: Windows Server 2016+ or Windows 11
# Hosting: IIS 8.5+ with ASP.NET Core Module
# Runtime: .NET 8.0

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS allowed origins
# Example: https://intranet.company.com
Security__AllowedOrigins__0=*

# =============================================================================
# LIBREOFFICE CONFIGURATION
# =============================================================================

# LibreOffice SDK path (relative to application directory)
# Default: LibreOffice
LibreOffice__SdkPath=LibreOffice

# Force bundled LibreOffice (recommended)
# true: Use bundled LibreOffice only
# false: Allow fallback to system LibreOffice
LibreOffice__ForceBundled=true

# Conversion timeout (seconds)
# Default: 300 (5 minutes)
LibreOffice__TimeoutSeconds=300

# Maximum concurrent conversions
# Recommended: 1-2 per CPU core
LibreOffice__MaxConcurrentConversions=2

# =============================================================================
# FILE HANDLING CONFIGURATION
# =============================================================================

# Maximum file upload size (bytes)
# Default: 52428800 (50MB)
FileHandling__MaxFileSize=52428800

# Temporary upload directory (relative to application)
# Default: App_Data\temp\uploads
FileHandling__TempDirectory=App_Data\temp\uploads

# Converted files output directory (relative to application)
# Default: App_Data\temp\converted
FileHandling__OutputDirectory=App_Data\temp\converted

# Temporary file retention (hours)
# Default: 24
FileHandling__TempFileRetentionHours=24

# Enable automatic cleanup of temporary files
FileHandling__CleanupTempFiles=true

# =============================================================================
# CONCURRENCY CONFIGURATION
# =============================================================================

# Maximum concurrent conversion operations
# Recommended: 1-2 per CPU core
# Default: 2
Concurrency__MaxConcurrentConversions=2

# Maximum queue size for pending conversions
# Recommended: 2-3x MaxConcurrentConversions
# Default: 10
Concurrency__MaxQueueSize=10

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================

# Document conversion timeout (milliseconds)
# Default: 60000 (60 seconds)
Timeouts__DocumentConversion=60000

# Image conversion timeout (milliseconds)
# Default: 30000 (30 seconds)
Timeouts__ImageConversion=30000

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Enable rate limiting
IpRateLimiting__EnableEndpointRateLimiting=true

# Requests per minute per IP
# Default: 30
IpRateLimiting__GeneralRules__0__Endpoint=*
IpRateLimiting__GeneralRules__0__Period=1m
IpRateLimiting__GeneralRules__0__Limit=30

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Enable CORS (if serving from different domain)
Cors__EnableCors=false

# Allowed origins (comma-separated)
# Example: https://intranet.company.com,https://app.company.com
Cors__AllowedOrigins__0=*

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Minimum log level
# Options: Debug, Information, Warning, Error, Critical
# Default: Information
Serilog__MinimumLevel__Default=Information

# Log file path (relative to application directory)
# Default: logs\file-conversion-api-{Date}.log
Serilog__WriteTo__0__Args__path=logs\file-conversion-api-.log

# Log retention (days)
# Default: 30
Serilog__WriteTo__0__Args__retainedFileCountLimit=30

# =============================================================================
# PREPROCESSING CONFIGURATION
# =============================================================================

# Enable DOCX preprocessing for better conversion quality
Preprocessing__EnablePreprocessing=true

# Normalize fonts
Preprocessing__NormalizeFonts=true

# Normalize colors
Preprocessing__NormalizeColors=true

# =============================================================================
# DEPLOYMENT EXAMPLES
# =============================================================================

# DEVELOPMENT (Windows 11)
# -------------------------
# LibreOffice__TimeoutSeconds=300
# Concurrency__MaxConcurrentConversions=2
# Serilog__MinimumLevel__Default=Debug

# PRODUCTION (Windows Server - Single Server)
# -------------------------------------------
# LibreOffice__TimeoutSeconds=600
# Concurrency__MaxConcurrentConversions=4
# Serilog__MinimumLevel__Default=Information

# PRODUCTION (Windows Server - High Availability)
# ------------------------------------------------
# LibreOffice__TimeoutSeconds=600
# Concurrency__MaxConcurrentConversions=8
# Concurrency__MaxQueueSize=20
# Serilog__MinimumLevel__Default=Warning

# =============================================================================
# CONFIGURATION HIERARCHY
# =============================================================================
# Settings are loaded in the following order (later sources override earlier):
# 1. appsettings.json (base configuration)
# 2. appsettings.{Environment}.json (environment-specific)
# 3. Environment variables (override all)
# 4. Command line arguments (highest priority)

# =============================================================================
# WINDOWS-SPECIFIC PATHS
# =============================================================================
# All paths support Windows path formats:
#   - Relative: App_Data\temp
#   - Absolute: C:\inetpub\FileConversionApi\temp
#   - UNC: \\server\share\temp (if IIS app pool identity has access)

# Backslashes (\) must be escaped in JSON: "C:\\temp"
# Environment variables use single backslash: C:\temp

# =============================================================================
# IIS CONFIGURATION
# =============================================================================
# When deployed to IIS, configure in web.config or application pool environment:
# 1. Open IIS Manager
# 2. Select Application Pool → Advanced Settings → Environment Variables
# 3. Add variables from this template
# 4. Restart application pool

# =============================================================================
# QUICK START
# =============================================================================
# 1. Copy this file to .env (optional - documentation only)
# 2. Configure appsettings.Production.json with your settings
# 3. Deploy to IIS using deploy.ps1
# 4. Configure environment variables in IIS if needed
# 5. Restart IIS: iisreset

# =============================================================================
# SUPPORT
# =============================================================================
# Documentation: README.md, ARCHITECTURE.md, DEPLOYMENT_NOTES.md
# Conversion Matrix: SUPPORTED_CONVERSIONS.md
# Health Check: http://your-server/health
# API Docs: http://your-server/api-docs
